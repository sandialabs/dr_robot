dist: bionic
language: python
python:
  - '3.7'

services:
    - docker

install:
    - pip install -r requirements.txt
    - pip install -e .

jobs:
    include:
        - stage: help
          script:
            - drrobot --help
        - stage: start scans
          name: Sublist3r
          script:
            - drrobot gather -sub github.com
            - if [ -z "$(ls -A $HOME/.drrobot/output/github.com/sublist3r)" ]; then exit 1; else echo "Success"; fi;
        - script:
             - drrobot gather -knock github.com
             - if [ -z "$(ls -A $HOME/.drrobot/output/github.com/knock)" ]; then exit 1; else echo "Success"; fi;
          name: Knock
        - script:
             - drrobot gather -amass github.com
             - if [ -z "$(ls -A $HOME/.drrobot/output/github.com/amass)" ]; then exit 1; else echo "Success"; fi;
          name: Amass 
        - script:
             - drrobot gather -brute github.com
             - if [ -z "$(ls -A $HOME/.drrobot/output/github.com/brute)" ]; then exit 1; else echo "Success"; fi;
          name: Subbrute
        - script:
             - drrobot gather -turbo github.com
             - if [ -z "$(ls -A $HOME/.drrobot/output/github.com/turbolist3r)" ]; then exit 1; else echo "Success"; fi;
          name: Turbolist3r
        - script:
             - drrobot gather -sfinder github.com
             - if [ -z "$(ls -A $HOME/.drrobot/output/github.com/subfinder)" ]; then exit 1; else echo "Success"; fi;
          name: Subfinder
        - script:
             - drrobot gather -recon github.com
             - if [ -z "$(ls -A $HOME/.drrobot/output/github.com/reconng)" ]; then exit 1; else echo "Success"; fi;
          name: ReconNG
        - script:
             - drrobot gather -altdns github.com
             - if [ -z "$(ls -A $HOME/.drrobot/output/github.com/altdns)" ]; then exit 1; else echo "Success"; fi;
          name: AltDNS
        - script:
             - drrobot gather -anubis github.com
             - if [ -z "$(ls -A $HOME/.drrobot/output/github.com/anubis)" ]; then exit 1; else echo "Success"; fi;
          name: Anubis
        - script:
             - drrobot gather -ctexpo github.com
             - if [ -z "$(ls -A $HOME/.drrobot/output/github.com/ctexpose)" ]; then exit 1; else echo "Success"; fi;
          name: CTExpose
        - script:
             - drrobot gather -ctfr github.com
             - if [ -z "$(ls -A $HOME/.drrobot/output/github.com/ctfr)" ]; then exit 1; else echo "Success"; fi;
          name: CTFR
        - script:
             - drrobot gather -pdlist github.com
             - if [ -z "$(ls -A $HOME/.drrobot/output/github.com/pdlist)" ]; then exit 1; else echo "Success"; fi;
          name: PDList
